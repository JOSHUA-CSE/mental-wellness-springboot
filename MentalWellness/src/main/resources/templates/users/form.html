<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title th:text="${user.user_id == null ? 'Add User' : 'Edit User'}"></title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" th:href="@{/form.css}">
</head>

<body>
  <div class="container">
    <h2 th:text="${user.user_id == null ? 'Add New User' : 'Edit User'}"></h2>

    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

  <form th:if="${user.user_id == null}" th:action="@{/api/users}" th:object="${user}" method="post">
      <label>Full Name:</label>
      <input type="text" th:field="*{name}" placeholder="Enter full name" required>

      <label>Email Address:</label>
      <input type="email" th:field="*{email}" placeholder="email@example.com" required>

      <label>Contact Number:</label>
      <input type="text" th:field="*{contact_no}" placeholder="10-digit phone number" maxlength="10" required>

      <label>Join Date:</label>
      <input type="date" th:field="*{join_date}" required>

      <div class="form-actions">
        <button type="submit">Save User</button>
        <a th:href="@{/api/users}" class="button">Cancel</a>
      </div>
  </form>

  <form th:unless="${user.user_id == null}" th:action="@{/api/users/update/{id}(id=${user.user_id})}" th:object="${user}" method="post">
      <label>Full Name:</label>
      <input type="text" th:field="*{name}" placeholder="Enter full name" required>

      <label>Email Address:</label>
      <input type="email" th:field="*{email}" placeholder="email@example.com" required>

      <label>Contact Number:</label>
      <input type="text" th:field="*{contact_no}" placeholder="10-digit phone number" maxlength="10" required>

      <label>Join Date:</label>
      <input type="date" th:field="*{join_date}" required>

      <div class="form-actions">
        <button type="submit">Update</button>
        <a th:href="@{/api/users}" class="button">Cancel</a>
      </div>
  </form>
  </div>

  <footer>Â© 2025 Mental Wellness System</footer>
</body>
</html>
